"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0});const path_1=require("path"),uuid_1=require("uuid"),fs_1=require("fs"),configs_1=__importDefault(require("../configs"));class FileUploadHelper{static uploadSingleFile(e,i="",s=""){if(!e.files||!e.files[i])return;const t=e.files[i],l=`${(0,uuid_1.v4)()}.${t.name.split(".").pop()}`;t.mv(`.${configs_1.default.uploadPath}${s}/${l}`),e.body||(e.body={}),e.body[i]=l}static removeSingleFile(e){if(!e)return;const[,i]=e.split(configs_1.default.baseUrl),s=(0,path_1.join)(process.cwd(),configs_1.default.uploadPath,i);(0,fs_1.existsSync)(s)&&(0,fs_1.unlinkSync)(s)}static uploadMultipleFiles(e,i="",s=""){if(!e.files||!e.files[i])return;const t=e.files[i],l=Array.isArray(t)?t:[t],o=[];l.forEach((e=>{const i=`${(0,uuid_1.v4)()}.${e.name.split(".").pop()}`;e.mv(`.${configs_1.default.uploadPath}${s}/${i}`),o.push(i)})),e.body||(e.body={}),e.body[i]=o}static removeMultipleFiles(e=[]){e&&0!==e.length&&e.forEach((e=>{const[,i]=e.split(configs_1.default.baseUrl),s=(0,path_1.join)(process.cwd(),configs_1.default.uploadPath,i);(0,fs_1.existsSync)(s)&&(0,fs_1.unlinkSync)(s)}))}}exports.default=FileUploadHelper;