"use strict";var __importDefault=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(exports,"__esModule",{value:!0}),exports.populateCandidateOptions=exports.populateCommentedByOptions=exports.populateCreatedByOptions=exports.populateMemberOptions=exports.populateMembersOptions=void 0;const mongoose_1=__importDefault(require("mongoose")),mongoose_paginate_v2_1=__importDefault(require("mongoose-paginate-v2")),role_1=__importDefault(require("./role")),society_1=__importDefault(require("./society")),modelHelper_1=require("../helpers/modelHelper"),schema=new mongoose_1.default.Schema({deletedAt:{type:Date,default:null},fullName:{type:String,required:!0},flatNumber:{type:String,required:!0},email:{type:String,required:!0,unique:!0},blockId:{type:mongoose_1.default.Schema.Types.ObjectId,ref:"Block",required:!0},password:{type:String,required:!1,set:modelHelper_1.encryptPassword},profileImage:{type:String,required:!1,get:e=>(0,modelHelper_1.createFileURL)(e,"members")},roles:[{ref:role_1.default,required:!0,default:"RESIDENT",type:mongoose_1.default.Schema.Types.ObjectId}],societies:[{ref:society_1.default,required:!0,type:mongoose_1.default.Schema.Types.ObjectId}]},{toJSON:modelHelper_1.setJson,timestamps:!0,versionKey:!1});schema.plugin(mongoose_paginate_v2_1.default);const Member=mongoose_1.default.model("Member",schema);exports.populateMembersOptions={path:"members",select:"fullName email profileImage"},exports.populateMemberOptions={path:"member",select:"fullName email profileImage"},exports.populateCreatedByOptions={path:"createdBy",select:"fullName email profileImage"},exports.populateCommentedByOptions={path:"comments.commentedBy",select:"fullName email profileImage"},exports.populateCandidateOptions={path:"candidates.candidate",select:"fullName email profileImage"},exports.default=Member;